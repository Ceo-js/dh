

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Playground Digital House</title>
    
    <link rel="icon" href="../../src/public/img/favicon.ico" type="svg+xml">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../src/public/css/globals.css">
    <script src='../../src/public/script/global.js' defer></script>
    <!-- <script src='../../src/public/script/includes/appbar.js' defer></script>
    <script src='../../src/public/script/includes/sidebar.js' defer></script> -->
</head>
<body>
    <app-bar></app-bar>
    <side-bar></side-bar>
    <home-page>
        <post>
            <post-home>
            <overlay>
                <post-header>
                    <t1>Modelos</t1>
                </post-header>
                <post-body>
                    <p>
                        MVC... quando você viu esse conceito, talvez na época fosse algo abstrato, porém nesta fase do jogo, é algo que você já conhece e entende muito bem. Mas o que isso tem a ver com Sequelize e bancos de dados?
                        <br><br>
                        Dentro desse padrão de projeto, o M se refere a Modelos. E se você se lembra bem, os modelos são a camada do programa que permite que você interaja com o banco de dados.
                        <br><br>
                        Os modelos são extremamente importantes, porque a partir deles você poderá definir a estrutura que a própria tabela possui e adicionalmente poderá gerar os relacionamentos que aquela tabela possui. O melhor de tudo é que você fará isso com código JavaScript puro.
                        <br><br>
                        Então, vamos modelar!
                    </p>
                    <video src="04 - Sequelize - Introdução,models e consultas/06 - Modelos/Modelos.mp4"></video>
                </post-body>
            </overlay>
            </post-home>
        </post>
        <post>
            <post-home>
            <overlay>
                <iframe src="04 - Sequelize - Introdução,models e consultas/06 - Modelos/pdf-sequilize-modelos.html" display frameborder="0"></iframe>
            </overlay>
            </post-home>
        </post>
        <post>
            <post-home>
            <overlay>
                <post-header>
                    <t1 color="#654">Exercício 1</t1>
                </post-header>
                <post-body>
                    <p>
                        Nossa base de dados possui uma tabela chamada usuarios que possui três colunas: nome, email e senha (todas do tipo string).
                        <br><br>
                        O objetivo deste exercício é ser capaz de criar um model associado à tabela de usuários.
                        <br><br>
                        Para criar nosso model vamos utilizar o método definir do objeto sequelize. Este método espera dois parâmetros: o primeiro é o nome da tabela e o segundo um JSON, cujas chaves são os nomes das colunas e os valores o tipo de dados.
                    </p>
                    <ol>
                        <li>O primeiro parâmetro do método define é uma string com o nome de la tabela: 'usuarios'</li>
                        <li>O segundo parâmetro é um JSON com a configuração das colunas</li>
                        <li>Dado que nossa tabela tem tres colunas nosso JSON deve ter tres chaves: nome, email e senha.</li>
                        <li>Todas as colunas são do tipo string, para indicar isso em nosso JSON vamos passar como valor de cada uma de nossas chaves o seguinte: Sequelize:STRING</li>
                    </ol>
                    <res>
                        <js>
const Sequelize = require('sequelize');
const sequelize = require('../database'); 
<br><br>
const Usuario = sequelize.define(
    "usuarios",
    {
        <tabs>
        nome: Sequelize.STRING, <br>
        email: Sequelize.STRING,    <br>
        senha: Sequelize.STRING
        </tabs>
    } );
<br><br>
module.exports = Usuario;
                        </js>
                    </res>
                </post-body>
            </overlay>
            </post-home>
            <post-home>
            <overlay>
                <post-body>
                    <t2 color="#fa0">Exercício 2</t2>
                    <p>
                        Ao configurar nossos modelos Sequelize você faz algumas suposições sobre nossas tabelas. Uma delas é que espera que todas as nossas tabelas tenham as colunas criadas e atualizadas.
                        <br><br>
                        Se você criar um model de tabela que não tenha nenhuma destas colunas você pode obter o erro clássico "Unknown column 'createdAt' in 'field list'".
                        <br><br>
                        Neste exemplo já temos o model configurado para a tabela de usuários, mas precisamos ter certeza de que não temos as colunas created_at ou updated_at. O seu objetivo será adicionar a configuração correspondente.
                    </p>
                    <ul>
                        <li>
                            Para indicar que as colunas created_at o updated_at não estão presentes devemos passar como terceiro parãmetro do método define o seguinte JSON: {timestamps: false}
                        </li>
                    </ul>
                    <res>
                        <js>
                            const Sequelize = require('sequelize');
                            const sequelize = require('../database'); 
                            <br><br>
                            const Usuario = sequelize.define('usuarios',{
                                <tabs>
                                    nome: Sequelize.STRING, <br>
                                    email: Sequelize.STRING,    <br>
                                    senha: Sequelize.STRING,
                                </tabs>
                            },{
                                <tabs>
                                    timestamps: false
                                </tabs>
                            }); 
                            <br><br>
                            module.exports = Usuario;
                        </js>
                    </res>
                </post-body>
            </overlay>
            </post-home>
        </post>
    </home-page>

</body>
</html>