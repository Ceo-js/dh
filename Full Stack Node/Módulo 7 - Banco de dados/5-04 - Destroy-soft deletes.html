

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Playground Digital House</title>
    
    <link rel="icon" href="../../src/public/img/favicon.ico" type="svg+xml">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../src/public/css/globals.css">
    <script src='../../src/public/script/global.js' defer></script>
</head>
<body>
    <app-bar></app-bar>
    <side-bar></side-bar>
    <home-page>
        <post>
            <post-home>
            <overlay>
                <post-header>
                    <t1 cor="#905">Destroy-soft deletes</t1>
                </post-header>
                <post-body>
                    <p>
                        Como o próprio nome menciona, destroy() é um método que permite deletar registros das tabelas de um banco de dados e assim como os métodos vistos em outros tópicos, isso é realmente fácil de implementar, já que tudo o que precisa como argumento é um objeto literal que define o elemento a ser excluído. Mais uma vez, lembramos que: "não se esqueça de colocar o where no delete from".
                        <br><br>
                        Vamos ver como funciona esse método simples.
                    </p>
                    <video src="05 - Sequelize - Manipulação de dados/04 - Destroy-soft deletes/Destroy-soft deletes.mp4"></video>
                </post-body>
            </overlay>
            </post-home>
            <iframe src="05 - Sequelize - Manipulação de dados/04 - Destroy-soft deletes/pdf-Destroy-soft deletes.html"display frameborder="0"></iframe>
        </post>
        <post>
            <post-home>
            <overlay>
                <post-header>
                    <t1 cor="#27f">Exercício 01</t1>
                </post-header>
                <post-body>
                    <p>
                        Da mesma maneira que inserimos e atualizamos dados em nosso banco de dados, o Sequelize também nos permite excluir registros. Para esta tarefa, o método destroy pode ser utilizado em qualquer um dos nossos modelos. Este método espera como parâmetro um objeto com uma query do tipo where que permita identificar a linha a ser excluída.
                        <br><br>
                        O objetivo deste exercício é remover o filme com um ID igual a 3.
                    </p>
                    <ul>
                        <li>Você deve usar o método destroy do model Filme. Algo como Filme.destroy(...)</li>
                        <li>Você deve passar como parâmetro o método destroy um json com uma query que contenha uma condilçai where. Algo como Filme.destroy({where: ...})</li>
                        <li>Você deve definir o where de modo que ele encontre o filme de id 3. Algo como Filme.destroy({where:{id:3}})</li>
                    </ul>
                    <res>
                        <js>
                            const Filme = require('model/filme.js') <br><br>

                            Filme.destroy( {
                                <tabs>
                                    where: { id: 3 }
                                </tabs>
                            } );
                        </js>
                    </res>
                </post-body>
            </overlay>
            </post-home>
        </post>
        <post>
            <post-home>
            <overlay>
                <post-header>
                    <t1 cor="#905">Exercício 02</t1>
                </post-header>
                <post-body>
                    <p>
                        Da mesma maneira que um registro pode ser excluído por seu ID, o mesmo pode ser feito para alguma outra coluna que identifique exclusivamente o elemento.
                        <br><br>
                        Neste exercício, excluiremos um usuário com base no seu email. O objetivo é eliminar o usuário cujo email é igual a "kenny@south-park.com"
                        <br><br>
                        Para isso, usaremos o método destroy do model Usuario, passando como parâmetro uma consulta que faz um where pelo email.
                    </p>
                    <ul>
                        <li>Você deve usar usar o método destroy do model Usuario. Algo como Usuario.destroy(...)</li>
                        <li>Você deve passar como parâmetro para o método destroy um objeto com uma consulta que contenha uma condição where. Algo como Usuario.destroy({where: ...})</li>
                        <li>Você deve buscar com a condição where o usuário que tem email igual a "kenny@south-park.com". Algo como Usuario.destroy({where:{email:"kenny@south-park.com"}})</li>
                    </ul>
                    <res>
                        <js>
                            const Usuario = require('model/usuario.js'); <br><br>

                            Usuario.destroy( {
                                <tabs>
                                    where: { email:"kenny@south-park.com" }
                                </tabs>
                            } );
                        </js>
                    </res>
                </post-body>
            </overlay>
            </post-home>
        </post>
        <post>
            <post-home>
            <overlay>
                <post-header>
                    <t1 cor="#d00">Exercício 03</t1>
                </post-header>
                <post-body>
                    <p>
                        O método destroy permite, como o select, passar outros operandos para a consulta. Em vez de usar uma comparação de operador igual (a comparação padrão), podemos usar um like.
                        <br><br>
                        Neste exemplo, removeremos todos os usuários cujo provedor de email é aol.com. Ou seja, aqueles cujo email termina em  "aol.com".
                        <br><br>
                        Para isso, vamos executar o método de destruição do model Usuario. Dentro do where (no método destroy), vamos passar um objeto com o nome da coluna e cujo valor é um novo JSON com a seguinte sintaxe: email: {[Op.like]: '%aol.com'}
                    </p>
                    <ul>
                        <li>Você deve usar o método destroy do model Usuário. Algo como Usuário.destroy(...)</li>
                        <li>Você deve passar como parâmetro para o método destroy um JSON com uma consulta que contenha uma condição where. Algo como Usuario.destroy({where: ...})</li>
                        <li>O JSON dentro do where vai ter como chave o nome da coluna pela qual queremos buscar e como valor a expressão para o like: algo como {where: { email: { [Op.like]: '%aol.com'}}</li>
                    </ul>
                    <res>
                        <js>
                            const Sequelize = require('sequelize'); <br>
                            const Usuario = require('model/usuario.js'); <br>
                            const Op = Sequelize.Op; <br><br>

                            Usuario.destroy( {
                                <tabs>
                                    where: { email: { [Op.like]: '%aol.com'} }
                                </tabs>
                            } );
                        </js>
                    </res>
                </post-body>
            </overlay>
            </post-home>
        </post>
    </home-page>

</body>
</html>